<div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="deleteConfirmModalLabel">Confirm Deletion</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close" onclick="forceCloseModal('deleteConfirmModal')">
                </button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <h3 class="mt-3">Delete your Profile Picture?</h3>
                    <i class="bi bi-exclamation-triangle text-danger display-5"></i>
                    <p class="text-center">This action cannot be undone. Your profile picture will be permanently
                        removed.</p>
                </div>
            </div>
            <div class="modal-footer d-flex align-items-center justify-content-around">
                <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal"
                    onclick="forceCloseModal('deleteConfirmModal')">
                    Cancel
                </button>
                <button type="button" class="btn btn-sm btn-danger" id="deleteProfilePicBtn" onclick="deleteProfilePic()">
                    <i class="bi bi-trash"></i> Delete
                </button>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<script>
    function forceCloseModal(modalId) {
        const modal = document.getElementById(modalId);
        const modalInstance = bootstrap.Modal.getInstance(modal) || new bootstrap.Modal(modal);
        modalInstance.hide();

        // Remove backdrop and modal-open class if still present
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
        const backdrop = document.querySelector('.modal-backdrop');
        if (backdrop) backdrop.remove();
    }
</script>
{% endblock %}
