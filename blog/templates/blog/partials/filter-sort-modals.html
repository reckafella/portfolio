<!-- Filter Modal -->
<div class="modal fade" id="filterModal" tabindex="-1" aria-labelledby="filterModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header py-2">
                <h5 class="modal-title" id="filterModalLabel">Filter by Tag</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="GET">
                    <div class="row g-3">
                        <div class="col-12 p-2">
                            <input type="hidden" name="q" value="{{ q }}">
                            <select class="form-select form-select-sm" name="tag">
                                <option value="" {% if not current_tag %}selected{% endif %}>All Tags</option>
                                {% if tags %}
                                {% for tag, count in tags %}
                                <option value="{{ tag | urlencode }}" {% if current_tag == tag %}selected{% endif %}>
                                    {{ tag |capfirst }} ({{ count }})
                                </option>
                                {% endfor %}
                                {% endif %}
                            </select>
                            <input type="hidden" name="sort" value="{{ current_sort }}">
                            <input type="hidden" name="page" value="{{ page_obj.number }}">
                        </div>
                    </div>
                    <div class="modal-footer justify-content-between align-items-stretch py-2">
                        <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-sm btn-success">Apply Filter</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Sort Modal -->
<div class="modal fade" id="sortModal" tabindex="-1" aria-labelledby="sortModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header py-2">
                <h5 class="modal-title" id="sortModalLabel">Sorting Options</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="GET">
                    <div class="row g-3">
                        <div class="col-12 p-2">
                            <input type="hidden" name="q" value="{{ q }}">
                            <input type="hidden" name="tag" value="{{ current_tag }}">
                            <input type="hidden" name="page" value="1">
                            <select class="form-select form-select-sm" name="sort">
                                {% for key, value in sorting_options.items %}
                                <option value="{{ key }}" {% if current_sort == key %}selected{% endif %}>
                                    {{ value |capfirst }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-between align-items-stretch py-2">
                        <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-sm btn-success">Apply Sort</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
