{% extends "app/base.html" %}
{% load wagtailcore_tags wagtailimages_tags wagtailuserbar wagtailadmin_tags %}

{% load static %}

{% block title %} {{ page_title }} {% if not all_authors %} by {{ author.get_full_name | default:author.username }} {% endif %}{% endblock %}

{% block content %}
<section class="py-5 mt-5">
    <div class="container d-flex justify-content-center align-items-center mt-4 card col-11">
        <div class="row justify-content-center d-flex justify-content-center align-items-center">
            <div class="w-100 mb-2">
                <div class="container row d-flex align-items-center justify-content-center">
                    <div class="row d-flex justify-content-center align-items-center">
                        <div class="card-header bg-transparent">
                            <div class="section-title py-2">
                                <h2 class="text-center">
                                    {{ page_title }} {% if not all_authors %} by {{ author.get_full_name | default:author.username | capfirst }} {% endif %}
                                </h2>
                            </div>
                        </div>
                        <div class="row card-body d-flex justify-content-center align-items-center">
                            {% comment %} include the template for filters and sorts {% endcomment %}
                            {% include 'blog/partials/filters_and_sorts.html' %}

                            {% comment %} include the template for articles list
                            this template contains the loop for articles
                            {% endcomment %}
                            {% include 'blog/partials/articles_list.html' %}

                        </div>
                        <div class="row g-2 m-5 justify-content-center align-items-center">
                            {% if topics %}
                            <h3 class="text-center text-primary">Topics</h3>
                            {% for topic in topics %}
                            <div class="d-flex justify-content-between w-100 flex-wrap">
                                <a href="{% url 'blog:posts_by_topic' topic %}" class="btn btn-outline-primary btn-sm py-0 px-2">{{ topic }}</a>
                            </div>
                            {% endfor %}
                            {% endif %}
                        </div>
                        <div class="card-footer bg-transparent">
                            {% comment %} include the template for pagination {% endcomment %}
                            {% include 'app/pagination/articles.html' %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
